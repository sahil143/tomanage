{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useSitemap = useSitemap;\nconst react_1 = require(\"react\");\nconst Route_1 = require(\"../Route\");\nconst router_store_1 = require(\"../global-state/router-store\");\nconst matchers_1 = require(\"../matchers\");\nconst routeSegments = (route, parents) => [...parents, ...route.route.split('/')];\nconst routeHref = (route, parents) => '/' + routeSegments(route, parents).map(segment => {\n  if ((0, matchers_1.matchDynamicName)(segment)?.deep) {\n    return segment + '/' + Date.now();\n  }\n  return segment === 'index' ? '' : segment;\n}).filter(Boolean).join('/');\nconst routeFilename = route => {\n  const segments = route.contextKey.split('/');\n  if (route.contextKey.match(/_layout\\.[jt]sx?$/)) {\n    return segments[segments.length - 2] + '/' + segments[segments.length - 1];\n  }\n  const routeSegmentsCount = route.route.split('/').length;\n  return segments.slice(-routeSegmentsCount).join('/');\n};\nconst mapForRoute = (route, parents) => ({\n  contextKey: route.contextKey,\n  filename: routeFilename(route),\n  href: routeHref(route, parents),\n  isInitial: route.initialRouteName === route.route,\n  isInternal: route.internal ?? false,\n  isGenerated: route.generated ?? false,\n  children: [...route.children].sort(Route_1.sortRoutes).map(child => mapForRoute(child, routeSegments(route, parents)))\n});\nfunction useSitemap() {\n  const sitemap = (0, react_1.useMemo)(() => router_store_1.store.routeNode ? mapForRoute(router_store_1.store.routeNode, []) : null, [router_store_1.store.routeNode]);\n  return sitemap;\n}","map":{"version":3,"names":["exports","useSitemap","react_1","require","Route_1","router_store_1","matchers_1","routeSegments","route","parents","split","routeHref","map","segment","matchDynamicName","deep","Date","now","filter","Boolean","join","routeFilename","segments","contextKey","match","length","routeSegmentsCount","slice","mapForRoute","filename","href","isInitial","initialRouteName","isInternal","internal","isGenerated","generated","children","sort","sortRoutes","child","sitemap","useMemo","store","routeNode"],"sources":["/Users/sbudhwar/workspace/github/tomanage/node_modules/expo-router/src/views/useSitemap.tsx"],"sourcesContent":["import { useMemo } from 'react';\n\nimport { RouteNode, sortRoutes } from '../Route';\nimport { store } from '../global-state/router-store';\nimport { matchDynamicName } from '../matchers';\nimport { Href } from '../types';\n\nconst routeSegments = (route: RouteNode, parents: string[]) => [\n  ...parents,\n  ...route.route.split('/'),\n];\n\nconst routeHref = (route: RouteNode, parents: string[]) =>\n  '/' +\n  routeSegments(route, parents)\n    .map((segment) => {\n      // add an extra layer of entropy to the url for deep dynamic routes\n      if (matchDynamicName(segment)?.deep) {\n        return segment + '/' + Date.now();\n      }\n      // index must be erased but groups can be preserved.\n      return segment === 'index' ? '' : segment;\n    })\n    .filter(Boolean)\n    .join('/');\n\nconst routeFilename = (route: RouteNode) => {\n  const segments = route.contextKey.split('/');\n  // join last two segments for layout routes\n  if (route.contextKey.match(/_layout\\.[jt]sx?$/)) {\n    return segments[segments.length - 2] + '/' + segments[segments.length - 1];\n  }\n\n  const routeSegmentsCount = route.route.split('/').length;\n\n  // Join the segment count in reverse order\n  // This presents files without layout routes as children with all relevant segments.\n  return segments.slice(-routeSegmentsCount).join('/');\n};\n\nexport type SitemapType = {\n  contextKey: string;\n  filename: string;\n  href: string | Href;\n  isInitial: boolean;\n  isInternal: boolean;\n  isGenerated: boolean;\n  children: SitemapType[];\n};\n\nconst mapForRoute: (route: RouteNode, parents: string[]) => SitemapType = (route, parents) => ({\n  contextKey: route.contextKey,\n  filename: routeFilename(route),\n  href: routeHref(route, parents),\n  isInitial: route.initialRouteName === route.route,\n  isInternal: route.internal ?? false,\n  isGenerated: route.generated ?? false,\n  children: [...route.children]\n    .sort(sortRoutes)\n    .map((child: RouteNode) => mapForRoute(child, routeSegments(route, parents))),\n});\n\nexport function useSitemap(): SitemapType | null {\n  const sitemap = useMemo(\n    () => (store.routeNode ? mapForRoute(store.routeNode, []) : null),\n    [store.routeNode]\n  );\n  return sitemap;\n}\n"],"mappings":";;;;;AA8DAA,OAAA,CAAAC,UAAA,GAAAA,UAAA;AA9DA,MAAAC,OAAA,GAAAC,OAAA;AAEA,MAAAC,OAAA,GAAAD,OAAA;AACA,MAAAE,cAAA,GAAAF,OAAA;AACA,MAAAG,UAAA,GAAAH,OAAA;AAGA,MAAMI,aAAa,GAAGA,CAACC,KAAgB,EAAEC,OAAiB,KAAK,CAC7D,GAAGA,OAAO,EACV,GAAGD,KAAK,CAACA,KAAK,CAACE,KAAK,CAAC,GAAG,CAAC,CAC1B;AAED,MAAMC,SAAS,GAAGA,CAACH,KAAgB,EAAEC,OAAiB,KACpD,GAAG,GACHF,aAAa,CAACC,KAAK,EAAEC,OAAO,CAAC,CAC1BG,GAAG,CAAEC,OAAO,IAAI;EAEf,IAAI,IAAAP,UAAA,CAAAQ,gBAAgB,EAACD,OAAO,CAAC,EAAEE,IAAI,EAAE;IACnC,OAAOF,OAAO,GAAG,GAAG,GAAGG,IAAI,CAACC,GAAG,EAAE;EACnC;EAEA,OAAOJ,OAAO,KAAK,OAAO,GAAG,EAAE,GAAGA,OAAO;AAC3C,CAAC,CAAC,CACDK,MAAM,CAACC,OAAO,CAAC,CACfC,IAAI,CAAC,GAAG,CAAC;AAEd,MAAMC,aAAa,GAAIb,KAAgB,IAAI;EACzC,MAAMc,QAAQ,GAAGd,KAAK,CAACe,UAAU,CAACb,KAAK,CAAC,GAAG,CAAC;EAE5C,IAAIF,KAAK,CAACe,UAAU,CAACC,KAAK,CAAC,mBAAmB,CAAC,EAAE;IAC/C,OAAOF,QAAQ,CAACA,QAAQ,CAACG,MAAM,GAAG,CAAC,CAAC,GAAG,GAAG,GAAGH,QAAQ,CAACA,QAAQ,CAACG,MAAM,GAAG,CAAC,CAAC;EAC5E;EAEA,MAAMC,kBAAkB,GAAGlB,KAAK,CAACA,KAAK,CAACE,KAAK,CAAC,GAAG,CAAC,CAACe,MAAM;EAIxD,OAAOH,QAAQ,CAACK,KAAK,CAAC,CAACD,kBAAkB,CAAC,CAACN,IAAI,CAAC,GAAG,CAAC;AACtD,CAAC;AAYD,MAAMQ,WAAW,GAAyDA,CAACpB,KAAK,EAAEC,OAAO,MAAM;EAC7Fc,UAAU,EAAEf,KAAK,CAACe,UAAU;EAC5BM,QAAQ,EAAER,aAAa,CAACb,KAAK,CAAC;EAC9BsB,IAAI,EAAEnB,SAAS,CAACH,KAAK,EAAEC,OAAO,CAAC;EAC/BsB,SAAS,EAAEvB,KAAK,CAACwB,gBAAgB,KAAKxB,KAAK,CAACA,KAAK;EACjDyB,UAAU,EAAEzB,KAAK,CAAC0B,QAAQ,IAAI,KAAK;EACnCC,WAAW,EAAE3B,KAAK,CAAC4B,SAAS,IAAI,KAAK;EACrCC,QAAQ,EAAE,CAAC,GAAG7B,KAAK,CAAC6B,QAAQ,CAAC,CAC1BC,IAAI,CAAClC,OAAA,CAAAmC,UAAU,CAAC,CAChB3B,GAAG,CAAE4B,KAAgB,IAAKZ,WAAW,CAACY,KAAK,EAAEjC,aAAa,CAACC,KAAK,EAAEC,OAAO,CAAC,CAAC;CAC/E,CAAC;AAEF,SAAgBR,UAAUA,CAAA;EACxB,MAAMwC,OAAO,GAAG,IAAAvC,OAAA,CAAAwC,OAAO,EACrB,MAAOrC,cAAA,CAAAsC,KAAK,CAACC,SAAS,GAAGhB,WAAW,CAACvB,cAAA,CAAAsC,KAAK,CAACC,SAAS,EAAE,EAAE,CAAC,GAAG,IAAK,EACjE,CAACvC,cAAA,CAAAsC,KAAK,CAACC,SAAS,CAAC,CAClB;EACD,OAAOH,OAAO;AAChB","ignoreList":[]},"metadata":{"hasCjsExports":true},"sourceType":"script","externalDependencies":[]}