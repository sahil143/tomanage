{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useLoadedNavigation = useLoadedNavigation;\nexports.useOptionalNavigation = useOptionalNavigation;\nconst native_1 = require(\"@react-navigation/native\");\nconst react_1 = require(\"react\");\nconst router_store_1 = require(\"../global-state/router-store\");\nfunction useLoadedNavigation() {\n  const navigation = (0, native_1.useNavigation)();\n  const isMounted = (0, react_1.useRef)(true);\n  const pending = (0, react_1.useRef)([]);\n  (0, react_1.useEffect)(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  const flush = (0, react_1.useCallback)(() => {\n    if (isMounted.current) {\n      const pendingCallbacks = pending.current;\n      pending.current = [];\n      pendingCallbacks.forEach(callback => {\n        callback(navigation);\n      });\n    }\n  }, [navigation]);\n  (0, react_1.useEffect)(() => {\n    if (router_store_1.store.navigationRef.current) {\n      flush();\n    }\n  }, [flush]);\n  const push = (0, react_1.useCallback)(fn => {\n    pending.current.push(fn);\n    if (router_store_1.store.navigationRef.current) {\n      flush();\n    }\n  }, [flush]);\n  return push;\n}\nfunction useOptionalNavigation() {\n  const [navigation, setNavigation] = (0, react_1.useState)(null);\n  const loadNavigation = useLoadedNavigation();\n  (0, react_1.useEffect)(() => {\n    loadNavigation(nav => setNavigation(nav));\n  }, []);\n  return navigation;\n}","map":{"version":3,"names":["exports","useLoadedNavigation","useOptionalNavigation","native_1","require","react_1","router_store_1","navigation","useNavigation","isMounted","useRef","pending","useEffect","current","flush","useCallback","pendingCallbacks","forEach","callback","store","navigationRef","push","fn","setNavigation","useState","loadNavigation","nav"],"sources":["/Users/sbudhwar/workspace/github/tomanage/node_modules/expo-router/src/link/useLoadedNavigation.ts"],"sourcesContent":["import { NavigationProp, NavigationState, useNavigation } from '@react-navigation/native';\nimport { useCallback, useState, useEffect, useRef } from 'react';\n\nimport { store } from '../global-state/router-store';\n\ntype GenericNavigation = NavigationProp<ReactNavigation.RootParamList> & {\n  getState(): NavigationState | undefined;\n};\n\n/** Returns a callback which is invoked when the navigation state has loaded. */\nexport function useLoadedNavigation() {\n  const navigation = useNavigation();\n  const isMounted = useRef(true);\n  const pending = useRef<((navigation: GenericNavigation) => void)[]>([]);\n\n  useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n\n  const flush = useCallback(() => {\n    if (isMounted.current) {\n      const pendingCallbacks = pending.current;\n      pending.current = [];\n      pendingCallbacks.forEach((callback) => {\n        callback(navigation as GenericNavigation);\n      });\n    }\n  }, [navigation]);\n\n  useEffect(() => {\n    if (store.navigationRef.current) {\n      flush();\n    }\n  }, [flush]);\n\n  const push = useCallback(\n    (fn: (navigation: GenericNavigation) => void) => {\n      pending.current.push(fn);\n      if (store.navigationRef.current) {\n        flush();\n      }\n    },\n    [flush]\n  );\n\n  return push;\n}\n\nexport function useOptionalNavigation(): GenericNavigation | null {\n  const [navigation, setNavigation] = useState<GenericNavigation | null>(null);\n  const loadNavigation = useLoadedNavigation();\n\n  useEffect(() => {\n    loadNavigation((nav) => setNavigation(nav));\n  }, []);\n\n  return navigation;\n}\n"],"mappings":";;;;;AAUAA,OAAA,CAAAC,mBAAA,GAAAA,mBAAA;AAyCAD,OAAA,CAAAE,qBAAA,GAAAA,qBAAA;AAnDA,MAAAC,QAAA,GAAAC,OAAA;AACA,MAAAC,OAAA,GAAAD,OAAA;AAEA,MAAAE,cAAA,GAAAF,OAAA;AAOA,SAAgBH,mBAAmBA,CAAA;EACjC,MAAMM,UAAU,GAAG,IAAAJ,QAAA,CAAAK,aAAa,GAAE;EAClC,MAAMC,SAAS,GAAG,IAAAJ,OAAA,CAAAK,MAAM,EAAC,IAAI,CAAC;EAC9B,MAAMC,OAAO,GAAG,IAAAN,OAAA,CAAAK,MAAM,EAA8C,EAAE,CAAC;EAEvE,IAAAL,OAAA,CAAAO,SAAS,EAAC,MAAK;IACbH,SAAS,CAACI,OAAO,GAAG,IAAI;IACxB,OAAO,MAAK;MACVJ,SAAS,CAACI,OAAO,GAAG,KAAK;IAC3B,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,KAAK,GAAG,IAAAT,OAAA,CAAAU,WAAW,EAAC,MAAK;IAC7B,IAAIN,SAAS,CAACI,OAAO,EAAE;MACrB,MAAMG,gBAAgB,GAAGL,OAAO,CAACE,OAAO;MACxCF,OAAO,CAACE,OAAO,GAAG,EAAE;MACpBG,gBAAgB,CAACC,OAAO,CAAEC,QAAQ,IAAI;QACpCA,QAAQ,CAACX,UAA+B,CAAC;MAC3C,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CAACA,UAAU,CAAC,CAAC;EAEhB,IAAAF,OAAA,CAAAO,SAAS,EAAC,MAAK;IACb,IAAIN,cAAA,CAAAa,KAAK,CAACC,aAAa,CAACP,OAAO,EAAE;MAC/BC,KAAK,EAAE;IACT;EACF,CAAC,EAAE,CAACA,KAAK,CAAC,CAAC;EAEX,MAAMO,IAAI,GAAG,IAAAhB,OAAA,CAAAU,WAAW,EACrBO,EAA2C,IAAI;IAC9CX,OAAO,CAACE,OAAO,CAACQ,IAAI,CAACC,EAAE,CAAC;IACxB,IAAIhB,cAAA,CAAAa,KAAK,CAACC,aAAa,CAACP,OAAO,EAAE;MAC/BC,KAAK,EAAE;IACT;EACF,CAAC,EACD,CAACA,KAAK,CAAC,CACR;EAED,OAAOO,IAAI;AACb;AAEA,SAAgBnB,qBAAqBA,CAAA;EACnC,MAAM,CAACK,UAAU,EAAEgB,aAAa,CAAC,GAAG,IAAAlB,OAAA,CAAAmB,QAAQ,EAA2B,IAAI,CAAC;EAC5E,MAAMC,cAAc,GAAGxB,mBAAmB,EAAE;EAE5C,IAAAI,OAAA,CAAAO,SAAS,EAAC,MAAK;IACba,cAAc,CAAEC,GAAG,IAAKH,aAAa,CAACG,GAAG,CAAC,CAAC;EAC7C,CAAC,EAAE,EAAE,CAAC;EAEN,OAAOnB,UAAU;AACnB","ignoreList":[]},"metadata":{"hasCjsExports":true},"sourceType":"script","externalDependencies":[]}